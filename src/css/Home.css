/* ---------------------- Home layout ---------------------- */
.home {
  padding: 2rem 0;
  width: 100%;
  box-sizing: border-box;
  overflow: visible;
}

/* Controls row: left-aligned group (search + search button + select toggle) */
.controls-row {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1.25rem;
  padding: 0 1rem;
  justify-content: flex-start;
  flex-wrap: wrap;
  position: relative; /* Added for better positioning context */
}

/* ---------- Search form (input + button) ---------- */
.search-form {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1 1 720px;
  min-width: 260px;
  max-width: calc(100% - 220px);
  box-sizing: border-box;
  position: relative; /* Ensure search form stays in place */
  z-index: 1; /* Keep search form above other elements */
}

/* input fills remaining space inside .search-form */
.search-input {
  flex: 1 1 auto;
  padding: 0.65rem 1rem;
  border-radius: 8px;
  border: none;
  background-color: rgba(255,255,255,0.03);
  color: var(--search-text, #fff);
  font-size: 1rem;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
}

/* input focus */
.search-input:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(106,90,205,0.12);
}

/* Search button - fixed height to match select toggle */
.search-btn,
.search-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0 1rem;
  height: 42px;
  border-radius: 8px;
  border: none;
  background-color: #e50914;
  color: #fff;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 6px 18px rgba(0,0,0,0.2);
}

.search-btn:hover,
.search-button:hover {
  background-color: #f40612;
}

/* ---------- Genre filter / custom select toggle ---------- */
.genre-filter {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 0 0 auto;
  position: relative; /* Ensure genre filter has positioning context */
}

/* custom select wrapper (toggle) */
.custom-select {
  display: inline-block;
  position: relative;
  min-width: 140px;
  max-width: 180px;
  width: auto;
  z-index: 1200;
}

/* visible toggle button - match search button height */
.custom-select-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
  width: 100%;
  height: 42px;
  padding: 0 0.9rem;
  border-radius: 8px;
  border: 1px solid var(--select-border, rgba(255,255,255,0.06));
  background: var(--select-bg, #0b0c10);
  color: var(--select-text, #fff);
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 6px 18px rgba(0,0,0,0.35);
}

/* subtle hover for toggle */
.custom-select-toggle:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 26px rgba(0,0,0,0.45);
}

/* chevron */
.cs-chevron {
  opacity: 0.9;
  font-size: 0.9rem;
}

/* ---------- Portal list styles (list is rendered to document.body) ---------- */
.custom-select-list {
  margin: 0;
  padding: 0.25rem 0;
  list-style: none;
  border-radius: 10px;
  max-height: 320px;
  overflow: auto;
  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.55);
  border: 1px solid var(--select-border, rgba(255,255,255,0.06));
  background: var(--select-bg, #0b0c10);
  position: fixed; /* Changed from absolute to fixed to prevent layout shifts */
  z-index: 1300; /* Higher z-index to ensure it appears above everything */
}

/* option */
.cs-option {
  padding: 0.6rem 1rem;
  cursor: pointer;
  color: var(--select-text, #fff);
  transition: background 120ms ease, color 120ms ease;
}

/* hover/focused */
.cs-option:hover,
.cs-option.focused {
  background: var(--option-hover, rgba(106,90,205,0.12));
}

/* selected */
.cs-option.selected {
  background: var(--option-selected, rgba(106,90,205,0.95));
  color: #fff;
}

/* custom scrollbar for the portal list */
.custom-select-list::-webkit-scrollbar {
  width: 10px;
}
.custom-select-list::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.35);
  border-radius: 8px;
}
.custom-select-list::-webkit-scrollbar-track {
  background: transparent;
}

/* Native select fallback styling (if used) */
.genre-select {
  background: var(--select-bg, #0b0c10);
  color: var(--select-text, #fff);
  border: 1px solid var(--select-border, rgba(255,255,255,0.06));
  z-index: 1000;
  padding: 0.5rem 0.9rem;
  border-radius: 8px;
}

/* ---------- Theme variables (driven by html[data-theme]) ---------- */
html[data-theme="dark"] {
  --select-bg: #0b0c10;
  --select-text: #f7f7fb;
  --select-border: rgba(255,255,255,0.06);
  --option-hover: rgba(106,90,205,0.14);
  --option-selected: rgba(106,90,205,0.95);
  --search-text: #fff;
}

html[data-theme="light"] {
  --select-bg: #ffffff;
  --select-text: #111827;
  --select-border: rgba(0,0,0,0.08);
  --option-hover: rgba(14,80,200,0.06);
  --option-selected: rgba(14,80,200,0.95);
  --search-text: #111;
}

/* ---------- Movies grid ---------- */
.movies-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
  padding: 1rem;
  width: 100%;
  box-sizing: border-box;
}

/* ---------- Responsive: stack gracefully on small screens ---------- */
@media (max-width: 720px) {
  .search-form {
    width: calc(100% - 32px);
    max-width: 100%;
  }

  .custom-select {
    min-width: 140px;
    max-width: 220px;
  }

  .controls-row {
    gap: 0.5rem;
  }
}

@media (max-width: 520px) {
  /* stack elements: search on top, controls under */
  .controls-row {
    flex-direction: column;
    align-items: stretch;
    gap: 0.75rem;
  }

  .search-form { 
    width: 100%; 
    max-width: 100%;
  }
  
  .custom-select { 
    width: 100%; 
    min-width: 0; 
    max-width: none; 
  }
  
  .custom-select-toggle { 
    height: 44px; 
  }
}

/* Added: Prevent body scroll when dropdown is open */
body.dropdown-open {
  overflow: hidden;
}